# Продвинутые примеры работы с Apache Kafka на PHP

В этой директории находятся продвинутые примеры использования Apache Kafka с PHP с применением объектно-ориентированного подхода.

## Файлы примеров

- **producer.php** - продвинутый пример отправки сообщений в Kafka
- **consumer.php** - продвинутый пример чтения сообщений из Kafka

## Описание

Продвинутые примеры демонстрируют использование Kafka с объектно-ориентированным подходом и расширенной функциональностью. Они подходят для реальных проектов и более сложных сценариев использования.

### Продюсер (producer.php)

Скрипт `producer.php` использует класс `KafkaProducer` для отправки сообщений в топик Kafka с более гибкими возможностями.

#### Функциональность продюсера:
- Использование ООП подхода с классом `KafkaProducer`
- Отправка одиночных сообщений и пакетов сообщений
- Поддержка ключей сообщений
- Гибкая настройка конфигурации Kafka
- Расширенное логирование
- Возможность указания разделов для отправки сообщений

### Консьюмер (consumer.php)

Скрипт `consumer.php` использует класс `KafkaConsumer` для чтения сообщений из топиков Kafka с более гибкими возможностями.

#### Функциональность консьюмера:
- Использование ООП подхода с классом `KafkaConsumer`
- Подписка на несколько топиков одновременно
- Настраиваемый обработчик сообщений (паттерн "Стратегия")
- Гибкая настройка конфигурации Kafka
- Расширенное логирование
- Возможность остановки и запуска консьюмера

## Сценарий использования

Эти примеры подходят для:
- Продакшн-сценариев с более сложной логикой
- Случаев, когда необходимо слушать несколько топиков
- Проектов, где важна гибкость и расширяемость
- Ситуаций, требующих специфической обработки для каждого сообщения

## Запуск примеров

### Запуск продюсера
```bash
docker exec -it kafka_examples_php php /var/www/html/examples/advanced/producer.php
```

### Запуск консьюмера
```bash
docker exec -it kafka_examples_php php /var/www/html/examples/advanced/consumer.php
```

## Отличия от базовых примеров

В отличие от базовых примеров, продвинутые примеры:
- Используют ООП подход с выделенными классами `KafkaProducer` и `KafkaConsumer`
- Позволяют подписываться на несколько топиков
- Предоставляют возможность передавать пользовательский обработчик сообщений
- Имеют более информативное логирование
- Поддерживают более гибкую настройку конфигурации
- Предоставляют методы для управления жизненным циклом консьюмера
